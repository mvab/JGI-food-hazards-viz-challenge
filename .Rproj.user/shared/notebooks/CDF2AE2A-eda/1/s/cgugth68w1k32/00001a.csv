"0","# new cols"
"0","data <- data %>%"
"0","        # tidy up dates"
"0","        mutate(date_added = dmy(date_added), "
"0","                date_published = dmy(date_published)) %>% "
"0","        mutate(date_added_year = year(date_added),"
"0","               date_published_year = year(date_published)) %>% "
"0","        mutate(date_published_month = ifelse(nchar(month(date_published)) == 2, month(date_published), paste0(0, month(date_published))),"
"0","               date_published_year_month = paste0(date_published_year, ""-"", date_published_month), "
"0","               date_published_quarter = ifelse(date_published_month %in% c(""01"", ""02"", ""03""), ""Q1"","
"0","                                       ifelse(date_published_month %in% c(""04"", ""05"", ""06""), ""Q2"","
"0","                                       ifelse(date_published_month %in% c(""07"", ""08"", ""09""), ""Q3"","
"0","                                       ifelse(date_published_month %in% c(""10"", ""11"", ""12""), ""Q4"", NA)))),"
"0","               date_published_year_quarter = paste0(date_published_year, ""-"", date_published_quarter) ) %>% "
"0","        # create incident ID"
"0","        separate(ID, into= c(""ID"", ""ID_incident""), sep= ""-"", remove=F) %>% "
"0","        mutate(ID_incident = ifelse(is.na(ID_incident), ID, ID_incident))"
"0",""
"0","data %>% count(date_added_year)"
